기술 교육

국중진 멘토

2017.07.11
———————————————————————————

Part 1: IoT Hub (ARTIK 710)


Part 2: IoT End-Device (ARTIK 053)

———————————————————————————
	ARTIK Module

Hub 520, 1010 -> 중간 성능인 710이 추가 됨

053, 710이 삼성전자에서 밀고 있는 메인 모듈.


라즈베리파이의 경우에는 ADC(I/O)가 없지만 ARTIK은 지원하는 중.

아틱 053의 경우 자료가 별로 없음.
나눠준 자료가 이것에 대한 거의 모든 자료.
타이젠 RT라는 RTOS가 올라가 있음.
RTOS이기 때문에 개발 환경이 생소할 수 있음.

053의 경우 ARTIK IDE (ARTIK SDK)를 사용
710의 경우 Eclipse Che or Linux with ARTIK SDKs(C/C++/node.js)


	ARTIK Cloud Platform

아틱이 갖는 장점이 무엇이냐?
보안! 보안이 우수하다.
물리적인 칩 보안, 네트워크 보안, 클라우드 보안 등이 우수하다.
개발자나 사용자에겐 크게 와닿지 않는 부분. 특성이 모호하다.


기존 클라우드 플랫폼의 경우 스토리지의 개념이 많았음.
아틱 클라우드 플랫폼의 경우 메시지. 1KB. 센싱된 데이터를 수집하기 위한 클라우드. 메시지를 통해 액션을 취함.
이러한 룰을 설정할 수 있음. 이 기종의 디바이스가 상호작용할 수 있는 플랫폼을 제공한다.

아틱 디바이스에 연결된 것들을 소프트웨어로 식별한다. 각 기기의 ID값이 아니다.

	아틱 클라우드 기능
디바이스를 등록. 어떤 디바이스에 어떤 액션을 취해라하는 룰을 정의. 차트. 로그. 데이터 익스포트.


	710
라즈베리파이의 경우 안면인식을 할 경우 퍼포먼스가 떨어짐. 빌드타임이 길다. opencv를 처리하는데 오래 걸린다. 최대 5프레임.
아틱의 경우 BSP 안에 필요한 것들이 이미 올라와 있음. CPU 파워가 강해서 조금 더 빠름. 강력한 하드웨어적 성능.


센서, 액츄에이터가 제대로 동작하지 않을 경우 전압이 적절한지 확인해봐야 한다. (전압 세팅 확인)
MIPI 기반의 모듈이 없어도 HDMI를 사용하는 미니 모니터, USB 웹캠 등을 사용 가능.


아틱 7 Power
점퍼 세팅을 해주어야 함.
배터리와 어댑터의 세팅이 다름.
회로가 고장날 경우 판단이 어려움. 전원 부분을 다룰 때 신중할 필요가 있음.

터미널용 디버그 usb.
PC와 보드 연결.
아두이노 등 다른 상황에서는 위쪽에 연결한다.
기본적으로는 밑에 연결하면 된다.

USB를 꼽고 Power switch를 켜면 전원을 받고 있지만 부팅은 안 되는 상태.
하얀색 스위치를 1초 이상 누르고 있으면 부팅된다.



	GPIO
일반적인 목적의 시리얼 포트.
일반적으로 input, output 외에 다른 식으로도 작동할 수 있도록 해놓음.

	레지스터
 메모리 공간에 매핑을 시켜놓음.

	Sys file system
사용자가 시스템에 접근하기 위해선 system call로 밖에 접근할 수 없는 건데 이것을 이용해 접근하기 쉽게 해줌

# cd /sys/class/gpio/gpio38
# ls
확인할 수 있음.

symbolic link 'l' : 다른 파일을 가리키고 있다.

export라는 파일에 gpio index를 매겨줬더니 sys file system이 해당 포트와 연결해줌.
direction 파일에 in/out 타입을 적을 수 있다.
value라는 파일에 0이나 1을 써줌으로써 on/off를 설정할 수 있다.

	p58.
80핀이 인터페이스 보드에 구성되어 있음.
각각의 헤더별로 마킹되어 있음.
핀의 역할이 나와 있다.
vcc, ground -> 전원 구성

각각의 헤더별로 어떤 레지스터가 매핑되어 있는지 확인할 수 있음.
data sheet, skematic을 통해 확인할 수 있음.

	p59.
silk index - low level index - system level index가 다 다르다. 잘 확인해야함.

	p60.
아틱의 경우 아두이노와의 호환성을 제공하면서 아두이노 핀 넘버를 매겨 접근할 수 있게 해준다. 여기서 또하나의 index가 나옴.
2~11까지의 핀 넘버를 사용함.


	p66.
LED를 핀으로 직접 연결할 경우 위험하다.
5V를 걸어주면 LED의 작동을 확신하지 못 한다. 장비의 내부회로가 고장날 수 있으니 주의.
저항을 통해 anode, cathod가 견딜 수 있는 정도로 낮춰주어야 한다.
아두이노용 포트는 2번부터 시작하기 때문에 GPIO6을 8번으로 볼 수 있음.

	p67.
아틱 기반의 아두이노다 보니까 터미널로 보내는 것이 아니다.
이더넷을 사용해 보내던가, 파일 전송 유틸리티로 보내야함.
컴파일된 바이너리 내보내기 기능을 통해 이 파일을 아틱에 보내야함.
아틱에서는 이 파일의 퍼미션을 수정한 후 실행해주면 된다.
아틱의 아두이노 호환성 : 리눅스 환경에서 아두이노 펌웨어를 새로운 프로세스로 등록해서 실행하겠다.

	p70.
네트워크 업로드를 통해 올려주는 것도 가능하다. 아틱의 홈디렉토리로 올라감.

	p71.
watcher
# /root/watcher &
watcher를 통해 아두이노의 시리얼 포트를 설정해 코드를 올리는 것처럼 사용가능.
하지만 usb포트를 하나 더 사용해야함.
종료
- ctrl + \ (quit)
- jobs -> # fg 1 -> ctrl + \
    - fg 명령어는 프로세스를 foreground 모드로 전환해줌.


아틱은 여러가지 프로그래밍 언어를 통해 접근할 수 있음.
방식만 약간 다르기 때문에 그것만 주의하면 된다.

ARTIK 예제는 File 기반으로 구현한 것으로 큰 의미는 없음.
sys file system 상의 I/O 예제는 다 같은 방식.

	ARTIK SDK
artik.io 홈페이지에서 받을 수 있음.
resource -> module documentation
software API
repository와 key값 관련 내용을 보고 진행해야 파일을 받을 수 있음.

sdk를 사용할 경우
	libartik-sdk-base(-devel)
	libartik-sdk-systemio(-devel)
이 두 개는 필수 설치.
(-devel까지 붙여서 설치를 하는 것이 좋음. 예제 파일도 제공)

	p89.
함수 포인터로 구현이 되어 있음. 매핑을 시켜주어야 함.
함수의 포인터 형태로 구현된 스트럭쳐(C), 추상메서드(C++), 인터페이스(Java)

온습도, 초음파, 모션 센셔와 같은 센서는 디지털 센서이기 때문에 High, Low가 반복이 됨.
얼마나 유지가 되느냐. 타이밍 특성이 중요하다. sys file system 접근 방식으로 접근할 경우
이것이 거의 불가능하기 때문에 아두이노 코드로 만들거나, SDK를 이용하는 것이 좋다.
아니면 Low level로 코딩을 해야되는 데 이것은 너무 간 것.


	p90.
전처리를 수행하고 object 파일을 만들고 링킹을 함. 그리고 로더에 대한 정보를 받아서 실행파일을 만들게 된다.
이 과정을 빌드라고 함. ARTIK은 프로세서가 ARM이기 때문에 arm- 컴파일러를 사용함. PC linux 환경에서 빌드를 할
경우 x16이기 때문에 flag가 필요함. 아틱에서는 gcc를 이용해 그냥 컴파일하면 된다.
Makefile의 대략적인 과정은 나중에 수정을 위해 알아두는 것이 좋다.


	p91.
	Programmable GPIOs
기본적으로 analog output은 없음.
PWM
- Pulse Width Modulation
- 펄스 폭을 조절해서 전압이 바뀌는 것과 같은 효과를 낸다.
ADC
- Analog to Digital Converter
- 6개의 채널 제공
GPIO
- Digital I/O
Serial
- PC and UART

센서 중 I2C, SPI 등을 이용하는 경우도 많아서 어떻게 이용할지 알아보는 것도 필요함.


	p93.
아날로그는 linear한 파형
공급되는 전압 대비 몇 가지의 값으로 표현을 할 수 있는가로 디테일을 확인함.
내가 사용하는 센서가 어떤 것이냐에 따라 산술 연산이 필요함.
reference voltage가 5v일 때와 비교해서 어떻게 변하는지 계산해야 한다.


———————————————————————————
